## 分布式事务

分布式事务解决方案有两种，一种刚性事务，一种柔性事务。   
- 刚性事务：   
  目前也就是x/open联盟提到的方案，被称xa协议。区分于单一节点数据库的事务一次提交的特点，xa协议本质变成两次提交，也就是两阶段提交。   
  和单节点数据库事务一样，遵循ACID特性。   
  事务执行在过程中需要将所需资源全部锁定，它更加适用于执行时间确定的短事务。对于长事务来说，整个事务进行期间对数据的独占，将导致对热点数据依赖的业务系统并发性能衰退明显。
- 柔性事务：   
  目前方案不止一个，比较出名的就是paxos协议。这个协议是遵循BASE特性。   
  柔性事务的理念则是通过业务逻辑将互斥锁操作从资源层面上移至业务层面。通过放宽对强一致性要求，来换取系统吞吐量的提升。   

ACID特性：
- 原子性（Atomicity）指事务作为整体来执行，要么全部执行，要么全不执行。
- 一致性（Consistency）指事务应确保数据从一个一致的状态转变为另一个一致的状态。
- 隔离性（Isolation）指多个事务并发执行时，一个事务的执行不应影响其他事务的执行。
- 持久性（Durability）指已提交的事务修改数据会被持久保存。


BASE特性：
- 基本可用（Basically Available）保证分布式事务参与方不一定同时在线。
- 柔性状态（Soft state）则允许系统状态更新有一定的延时，这个延时对客户来说不一定能够察觉。
- 而最终一致性（Eventually consistent）通常是通过消息传递的方式保证系统的最终一致性。

![事务比较](https://gitee.com/mapc/picture-bed/raw/master/static/%E4%BA%8B%E5%8A%A1%E6%AF%94%E8%BE%83.png)